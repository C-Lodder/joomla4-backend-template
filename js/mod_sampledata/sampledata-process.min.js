((e,a,t)=>{"use strict";t.SampleData={inProgress:!1},t.sampledataAjax=(e,s,r)=>{const n=`index.php?option=com_ajax&format=json&group=sampledata&${t.getOptions("csrf.token")}=1`,o=a.createElement("li");o.classList.add(`sampledata-steps-${e}-${r}`);const d=a.createElement("p");d.classList.add("text-center"),o.appendChild(d),a.querySelector(`.sampledata-progress-${e} ul`).appendChild(o),t.request({url:`${n}&type=${e}&plugin=SampledataApplyStep${r}&step=${r}`,method:"GET",perform:!0,onSuccess:n=>{let o={};try{o=JSON.parse(n)}catch(a){return t.renderMessages({error:[t.JText._("MOD_SAMPLEDATA_INVALID_RESPONSE")]},`.sampledata-steps-${e}-${r}`),void(t.SampleData.inProgress=!1)}let d,l="";if(o.success&&o.data&&o.data.length>0){const n=a.querySelector(`.sampledata-progress-${e} .progress-bar`);if(o.data.forEach(a=>{null!==a&&(d=a.success,l=d?"bg-success":"bg-danger",d?t.renderMessages({message:[a.message]},`.sampledata-steps-${e}-${r}`):t.renderMessages({error:[a.message]},`.sampledata-steps-${e}-${r}`))}),n.innerText=`${r}/${s}`,n.style.width=r/s*100+"%",n.setAttribute("aria-valuemin",0),n.setAttribute("aria-valuemax",100),n.setAttribute("aria-valuenow",r/s*100),n.classList.add(l),d&&r<=s){const a=r+1;a<=s&&t.sampledataAjax(e,s,a)}}else t.renderMessages({error:[t.JText._("MOD_SAMPLEDATA_INVALID_RESPONSE")]},`.sampledata-steps-${e}-${r}`),t.SampleData.inProgress=!1},onError:()=>{alert("Something went wrong! Please close and reopen the browser and try again!")}})},t.sampledataApply=s=>{const r=s.getAttribute("data-type"),n=s.getAttribute("data-steps");if(t.SampleData.inProgress)return;if(s.getAttribute("data-processed"))return void t.renderMessages({info:[t.JText._("MOD_SAMPLEDATA_ITEM_ALREADY_PROCESSED")]});if(!e.confirm(t.JText._("MOD_SAMPLEDATA_CONFIRM_START")))return!1;return a.querySelectorAll(".sampledata-progress-"+r).forEach(e=>{e.classList.remove("d-none")}),s.getAttribute("data-processed",!0),t.SampleData.inProgress=!0,t.sampledataAjax(r,n,1),!1};const s=()=>{const e=a.getElementById("sample-data-wrapper");if(e){e.querySelectorAll(".apply-sample-data").forEach(e=>{e.addEventListener("click",({target:e})=>t.sampledataApply(e))})}a.removeEventListener("DOMContentLoaded",s)};a.addEventListener("DOMContentLoaded",s)})(window,document,window.Joomla);